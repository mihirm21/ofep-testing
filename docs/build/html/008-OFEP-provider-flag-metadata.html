
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>OFEP-007: Surfacing flag metadata &#8212; OFEP-TESTING 1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ofep-007-surfacing-flag-metadata">
<h1>OFEP-007: Surfacing flag metadata<a class="headerlink" href="#ofep-007-surfacing-flag-metadata" title="Permalink to this heading">¶</a></h1>
</section>
<section id="state-approved">
<h1>State: APPROVED<a class="headerlink" href="#state-approved" title="Permalink to this heading">¶</a></h1>
<p>This proposal lays out a mechanism for flag providers to surface arbitrary flag metadata to Open Feature, and for hooks to access this metadata.</p>
</section>
<section id="background">
<h1>Background<a class="headerlink" href="#background" title="Permalink to this heading">¶</a></h1>
<p>Flag providers maintain metadata about a feature flag, and there are scenarios where a hook might benefit from being able to access this metadata. For example, a flag provider could surface a <code class="docutils literal notranslate"><span class="pre">management-url</span></code> attribute which an open-telemetry hook could then add to an otel span, allowing someone viewing a trace for a feature-flagged operation to easily navigate to a webpage describing that flag in detail.</p>
<p>Different providers will expose different kinds of metadata, and different Application Integrators will want to consume that metadata in different ways. As such, the goal of this proposal is to provide a simple way for the Open Feature runtime to pass generic metadata from a provider to a hook, without Open Feature itself understanding the semantics of that metadata.</p>
</section>
<section id="non-goals">
<h1>Non-goals<a class="headerlink" href="#non-goals" title="Permalink to this heading">¶</a></h1>
<p>In the future we may wish to standardize the semantics of some key metadata attributes which are common amongst many providers (e.g. <code class="docutils literal notranslate"><span class="pre">expiration-date</span></code>, <code class="docutils literal notranslate"><span class="pre">owner</span></code>, <code class="docutils literal notranslate"><span class="pre">management-url</span></code>) so that provider-agnostic hooks can be created to consume these standard attributes, but that is explicitly NOT in the scope of this OFEP - we would prefer to see which common attributes naturally emerge and then “pave those cow paths”.</p>
</section>
<section id="proposal">
<h1>Proposal<a class="headerlink" href="#proposal" title="Permalink to this heading">¶</a></h1>
<p>The Open Feature spec will be extended in two ways:</p>
<ul class="simple">
<li><p>a flag provider will be able to provide a bag of metadata attributes for a feature flag. This bag will be a set of key-value pairs, where the key will be a string and the value will be a small set of primitive values.</p></li>
<li><p>a hook will be able to access these metadata attributes</p></li>
</ul>
<p><em>note</em> what follows is a strawman proposal for one way to extend the spec. Please poke holes!</p>
<p>We add an optional <code class="docutils literal notranslate"><span class="pre">flagMetadata:FlagMetadata</span></code> field to the Resolution Details structure - and therefore also to the Evaluation Details structure, since the former is a specified as having a subset of the fields in the latter.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FlagMetadata</span></code> has a type like <code class="docutils literal notranslate"><span class="pre">Record&lt;string,string|boolean|number&gt;</span></code> in typescript, where the key is the metadata attribute and the value is the metadata value.</p>
<p>The flagMetadata field MAY return an empty record. A missing <code class="docutils literal notranslate"><span class="pre">flagMetadata</span></code> field MUST be interpreted as an empty record.</p>
<p>Since hooks are provided the evaluation context, they would have access to any flag metadata that the provider provides.</p>
<section id="other-details">
<h2>other details<a class="headerlink" href="#other-details" title="Permalink to this heading">¶</a></h2>
<p>The flagMetadata field should be considered immutable. We won’t support adding/removing/editing metadata in hooks, for example.</p>
<p>Format of the metadata attribute is left up to the provider. Maybe we provide suggestions around formatting, and a namespacing prefix (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;flags-r-us.management-url&quot;</span></code>). Following otel conventions for span attributes might be smart.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">OFEP-TESTING</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Mihir Mittal.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/008-OFEP-provider-flag-metadata.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>